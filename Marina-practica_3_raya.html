<!DOCTYPE html>
<meta charset="UTF8">
<html>
	<head>
	  <title>
	    3 en raya
	  </title>
		<style>
		p{
			width: 900px;
			height: 25px;
			font-size: 35px;
			text-align: center;
		}
		table{
			 width: 900px;
			 height: 900px;
			 position: absolute;
		 }
		 tr {
			 display: inline;
		 }
		 td {
			 height: 300px;
			 border: solid;
			 width: 300px;
             font-size: 60px;
             text-align: center;
		 }
		 .playerSlot {
			 background-color: red;
		 }
	 	 .foeSlot {
	 		 background-color: blue;
	 	 }
		</style>
		<script>
			var playerSlotSelections = [];
			var foeSlotSelections = [];
			var victoriesArray = [[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]];
			var tableroActual = [ , ,  
                            , ,  
                            , ,  ];
             

		function determinateVictory(slotCheck, winner){
			console.log("determinateVictory");
				var result = victoriesArray.findIndex(function (vsize){
				return (vsize.includes(parseInt(slotCheck[0],10)) && 
				vsize.includes(parseInt(slotCheck[1],10)) && vsize.includes(parseInt(slotCheck[2],10)));
				});
				console.log("result",result);
				console.log("slotCheck[0]",slotCheck);
				if(result != -1){
					victoria(winner);
				}else{
					return 0;
					
				}		
         }
		function victoria(winner){
           document.getElementById("GameVictory").innerHTML = "¡Victoria! de " + winner;
         }
			function updateCellClass(targetClass, classUse){
                
                document.getElementById(targetClass).classList.add(classUse)

                
			}
		function manageClick(event){
                event.innerText = document.turn;
      
            // Verificació de número de jugadas por jugador
             if( document.turn == "X"){   
		       updateCellClass(event.id,"foeSlot");
			   
                if (foeSlotSelections.length == 3){
					
                }else{
                  foeSlotSelections.push(event.id);
				  determinateVictory(foeSlotSelections, "Computer");
                  if(event.innerText == "X"){
                // Ahora se puede quitar un elemento de foeSlotSelections
			    //  var index = foeSlotSelections.indexOf(event.id);
			    //    foeSlotSelections.splice(index,1);  
		 
                  }
                }
            
             }else if (document.turn == "O"){
                updateCellClass(event.id,"playerSlot");
				
                if (playerSlotSelections.length == 3){
					
                }else{
                playerSlotSelections.push(event.id);
				determinateVictory(playerSlotSelections, "Humano");
				if(event.innerText == "O"){
                // Ahora se puede quitar un elemento de playerSlotSelections
				// var index1 = playerSlotSelections.indexOf(event.id);
				// playerSlotSelections.splice(index1,1); 

                  }
				}
             } 
            // Llamar a la función cambio de turno.    
                switchTurn();          
			}
			function mainFuncLauncher(){
                document.turn ="O";
                setMessage(document.turn + " Empieza.")
				  
			}
            // Función que nos mostrará lo mensajes en pantalla
            function setMessage(msg) {
               document.getElementById("gameResult").innerText = msg;
            }
			// Funcion Ordenador
	     
			function computerMove() {
					var vacio = [];
					var random;
			}
			celda.forEach(function(celda){
					if (cell.textContent == '') {
					vacio.push(celda);
					}
				});
				random = Math.ceil(Math.random() * vacio.length) - 1;
					vacio[random].textContent = mark;
					determinateVictory();
					switchTurn();


            // Determina de quién es el turno
            function switchTurn(){
                console.log("cambiando turno");
                if(document.turn == "X"){
                    document.turn = "O";
                }else {
                    document.turn = "X";
                }
                setMessage (" Es el turno de: "+ document.turn + "")
			
            }   

		</script>
	</head>
	<body onload="mainFuncLauncher()">
		<p id="gameResult"></p>
		<p id="GameVictory"></p>
		
		<table>
			<tr>
				<td  id="1" onclick="manageClick(this);">
				</td>
				<td  id="2" onclick="manageClick(this);">
				</td>
				<td id="3" onclick="manageClick(this);">
				</td>
			</tr>
			<tr>
				<td id="4"onclick="manageClick(this);">
				</td>
				<td  id="5" onclick="manageClick(this);">
				</td>
				<td  id="6"onclick="manageClick(this);">
				</td>
			</tr>
			<tr>
				<td id="7" onclick="manageClick(this);"> 
				</td>
				<td  id="8"onclick="manageClick(this);">
				</td>
				<td  id="9" onclick="manageClick(this);">
				</td>
			</tr>
		</table>
	</body>
</html>
